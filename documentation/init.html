<h2><a id="init">Initialisation</a></h2>

<p>
  In order for SuperScript.ExternalFile to handle the HTTP requests for the generated files, some additional code is required.
</p>

<p>
  Furthermore, SuperScript.ExternalFile also requires handlers for the additional options, such as initialising the store,
  deleting files, <i>etc.</i>
</p>

<p>
  These handlers should be added to the config file:
</p>

<pre class="brush: xml">
  &lt;system.webServer&gt;
    &lt;handlers&gt;
      &lt;add name="DeleteHandler" verb="GET" path="delete" type="SuperScript.ExternalFile.Handlers.Delete, SuperScript.ExternalFile" /&gt;
      &lt;add name="EmptyHandler" verb="GET" path="empty" type="SuperScript.ExternalFile.Handlers.Empty, SuperScript.ExternalFile" /&gt;
      &lt;add name="GetHandler" verb="GET" path="files" type="SuperScript.ExternalFile.Handlers.Get, SuperScript.ExternalFile" /&gt;
      &lt;add name="InitHandler" verb="GET" path="init" type="SuperScript.ExternalFile.Handlers.Init, SuperScript.ExternalFile" /&gt;
      &lt;add name="ListHandler" verb="GET" path="list" type="SuperScript.ExternalFile.Handlers.List, SuperScript.ExternalFile" /&gt;
      &lt;add name="ReInitHandler" verb="GET" path="reinit" type="SuperScript.ExternalFile.Handlers.ReInit, SuperScript.ExternalFile" /&gt;
      &lt;add name="RemoveHandler" verb="GET" path="remove" type="SuperScript.ExternalFile.Handlers.Remove, SuperScript.ExternalFile" /&gt;
    &lt;/handlers&gt;
  &lt;/system.webServer&gt;
</pre>

<p>
  If SuperScript.ExternalFile is installed via NuGet then the above configuration is inserted automatically.
</p>

<p>
  However, if SuperScript.ExternalFile is being added to an MVC project then an additional step is required. This is because
  the routing configuration must be made aware of these handlers. Typically, an MVC project will contain a <code>RouteConfig</code>
  class in the <i>App_Start</i> folder - ideal location for the following code is at the end of the <code>RegisterRoutes</code>
  method.
</p>

<pre class="brush: c#">
  routes.Insert(0, new Route(SuperScript.ExternalFile.Configuration.Settings.Instance.HandlerMappings.Delete + "/{filename}", new SuperScript.ExternalFile.Handlers.Routing.Delete()));
  routes.Insert(0, new Route(SuperScript.ExternalFile.Configuration.Settings.Instance.HandlerMappings.Empty, new SuperScript.ExternalFile.Handlers.Routing.Empty()));
  routes.Insert(0, new Route(SuperScript.ExternalFile.Configuration.Settings.Instance.HandlerMappings.Get + "/{filename}", new SuperScript.ExternalFile.Handlers.Routing.Get()));
  routes.Insert(0, new Route(SuperScript.ExternalFile.Configuration.Settings.Instance.HandlerMappings.Init, new SuperScript.ExternalFile.Handlers.Routing.Init()));
  routes.Insert(0, new Route(SuperScript.ExternalFile.Configuration.Settings.Instance.HandlerMappings.List, new SuperScript.ExternalFile.Handlers.Routing.List()));
  routes.Insert(0, new Route(SuperScript.ExternalFile.Configuration.Settings.Instance.HandlerMappings.ReInit, new SuperScript.ExternalFile.Handlers.Routing.ReInit()));
  routes.Insert(0, new Route(SuperScript.ExternalFile.Configuration.Settings.Instance.HandlerMappings.Remove, new SuperScript.ExternalFile.Handlers.Routing.Remove()));
</pre>

<h3><a id="scheduling">Scheduling Background Tasks</a></h3>

<p>
  SuperScript.ExternalFile can be configured to scavenge out-dated files in the background. This is accomplished via the
  <a href="https://github.com/jgeurts/FluentScheduler" target="_blank">FluentScheduler</a> library. See <a href="/#!/storage.istore/config">here</a>
  for more information.
</p>

<p>
  FluentScheduler requires some initialisation code:
</p>

<pre class="brush: c#">
  FluentScheduler.TaskManager.Initialize(new SuperScript.ExternalFile.SchedulerRegistry());
</pre>

<p>
  An ideal location for this code is in the <code>SuperScriptConfig</code> class's <code>PostInit</code> method.
</p>
